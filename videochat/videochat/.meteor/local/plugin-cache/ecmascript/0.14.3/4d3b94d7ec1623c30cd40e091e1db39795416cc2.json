{"metadata":{},"options":{"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/home/marc/Escritorio/ETSETB/3B/SAD/SAD/videochat/videochat/packages/elmarti:video-chat/lib/index.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser.legacy"},"sourceFileName":"packages/elmarti:video-chat/lib/index.js","filename":"/home/marc/Escritorio/ETSETB/3B/SAD/SAD/videochat/videochat/packages/elmarti:video-chat/lib/index.js","passPerPreset":false,"envName":"development","cwd":"/home/marc/Escritorio/ETSETB/3B/SAD/SAD/videochat/videochat","root":"/home/marc/Escritorio/ETSETB/3B/SAD/SAD/videochat/videochat","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":true,"enforceStrictMode":false,"dynamicImport":true}},{"key":"transform-runtime","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.9.2","helpers":true,"useESModules":false,"corejs":false}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$3","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$4","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"Program":{"enter":[null],"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-nullish-coalescing-operator","visitor":{"_exploded":{},"_verified":{},"LogicalExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-chaining","visitor":{"_exploded":{},"_verified":{},"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-catch-binding","visitor":{"_exploded":{},"_verified":{},"CatchClause":{"enter":[null]}},"options":{}},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"TSModuleBlock":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectPattern":{"enter":[null]}},"options":{}},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"ObjectMethod":{"enter":[null],"exit":[null]},"ClassMethod":{"enter":[null],"exit":[null]},"ClassPrivateMethod":{"enter":[null],"exit":[null]},"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]}},"options":{}}],"presets":[],"generatorOpts":{"filename":"/home/marc/Escritorio/ETSETB/3B/SAD/SAD/videochat/videochat/packages/elmarti:video-chat/lib/index.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"packages/elmarti:video-chat/lib/index.js"}},"code":"module.export({\n  MeteorVideoChat: function () {\n    return MeteorVideoChat;\n  }\n});\n\nvar MeteorVideoChat = function (_ref) {\n  var Meteor = _ref.Meteor,\n      MeteorClient = _ref.MeteorClient,\n      Tracker = _ref.Tracker,\n      CoreClient = _ref.CoreClient,\n      ReactiveVar = _ref.ReactiveVar,\n      ddp = _ref.ddp,\n      Streamer = _ref.Streamer;\n  var core = new CoreClient({});\n  core.on('emitIceCandidate', function (iceCandidate) {\n    return Meteor.VideoCallServices.stream.emit('video_message', JSON.stringify({\n      candidate: iceCandidate\n    }));\n  });\n  core.on('emitTargetAnswer', function (answer) {\n    return Meteor.VideoCallServices.stream.emit('video_message', JSON.stringify({\n      answer: answer\n    }));\n  });\n  core.on('callInitialized', function (params) {\n    return Meteor.call('VideoCallServices/call', params.id, function (err, _id) {});\n  });\n  core.on('endCall', function () {\n    Meteor.VideoCallServices.onTerminateCall();\n  });\n  core.on('answerCall', function () {\n    Meteor.call('VideoCallServices/answer', function (err) {\n      if (err) {\n        core.events.callEvent(\"error\")(err);\n      }\n\n      Meteor.VideoCallServices.setState({\n        localMuted: false,\n        remoteMuted: false,\n        inProgress: true,\n        ringing: false\n      });\n    });\n  });\n  core.on('emitSenderDescription', function (sessionDescription) {\n    return Meteor.VideoCallServices.stream.emit('video_message', JSON.stringify({\n      offer: sessionDescription\n    }));\n  });\n  core.on('error', function (err) {\n    return console.log(\"error\", err);\n  });\n  var VideoCallServices = new MeteorClient({\n    meteor: Meteor,\n    tracker: Tracker,\n    core: core,\n    reactiveVar: ReactiveVar,\n    ddp: ddp,\n    Streamer: Streamer\n  });\n  Meteor.VideoCallServices = VideoCallServices;\n  core.on('recieveCall', VideoCallServices.onReceiveCall);\n  core.on('peerConnectionCreated', VideoCallServices.onPeerConnectionCreated);\n\n  Meteor.VideoCallServices.setOnError = function (onError) {\n    CoreClient.prototype.onError = onError;\n  };\n\n  return VideoCallServices;\n};","map":{"version":3,"sources":["packages/elmarti:video-chat/lib/index.js"],"names":["module","export","MeteorVideoChat","Meteor","MeteorClient","Tracker","CoreClient","ReactiveVar","ddp","Streamer","core","on","iceCandidate","VideoCallServices","stream","emit","JSON","stringify","candidate","answer","params","call","id","err","_id","onTerminateCall","events","callEvent","setState","localMuted","remoteMuted","inProgress","ringing","sessionDescription","offer","console","log","meteor","tracker","reactiveVar","onReceiveCall","onPeerConnectionCreated","setOnError","onError","prototype"],"mappings":"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","sourcesContent":["export const MeteorVideoChat = ({\n    Meteor,\n    MeteorClient,\n    Tracker,\n    CoreClient,\n    ReactiveVar,\n    ddp,\n    Streamer\n}) => {\n\n\n        const core = new CoreClient({});\n        core.on('emitIceCandidate', iceCandidate =>\n            Meteor.VideoCallServices.stream.emit('video_message', JSON.stringify({ candidate: iceCandidate }))\n        );\n        core.on('emitTargetAnswer', answer =>\n            Meteor.VideoCallServices.stream.emit('video_message', JSON.stringify({ answer }))\n        );\n        core.on('callInitialized', (params) =>\n            Meteor.call('VideoCallServices/call', params.id,\n                (err, _id) => {})\n        );\n        core.on('endCall', () => {\n            Meteor.VideoCallServices.onTerminateCall();\n        });\n        core.on('answerCall', () => {\n            Meteor.call('VideoCallServices/answer', err => {\n                if (err) {\n                    core.events.callEvent(\"error\")(err);\n                }\n                Meteor.VideoCallServices.setState({\n                    localMuted: false,\n                    remoteMuted: false,\n                    inProgress: true,\n                    ringing: false\n                });\n            });\n        });\n        core.on('emitSenderDescription', sessionDescription =>\n            Meteor.VideoCallServices.stream.emit('video_message', JSON.stringify({ offer: sessionDescription }))\n        );\n        core.on('error', err => console.log(\"error\", err));\n\n        const VideoCallServices = new MeteorClient({\n            meteor: Meteor,\n            tracker: Tracker,\n            core,\n            reactiveVar: ReactiveVar,\n            ddp,\n            Streamer\n        });\n        Meteor.VideoCallServices = VideoCallServices;\n        core.on('recieveCall', VideoCallServices.onReceiveCall);\n        core.on('peerConnectionCreated', VideoCallServices.onPeerConnectionCreated);\n        Meteor.VideoCallServices.setOnError = function(onError) {\n            CoreClient.prototype.onError = onError;\n        };\n   \n        return VideoCallServices\n        \n    \n};\n"]},"sourceType":"module","hash":"4d3b94d7ec1623c30cd40e091e1db39795416cc2"}
