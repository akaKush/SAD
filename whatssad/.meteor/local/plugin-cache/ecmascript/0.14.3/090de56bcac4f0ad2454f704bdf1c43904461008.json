{"metadata":{},"options":{"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/home/marc/Escritorio/ETSETB/3B/SAD/SAD/whatssad/imports/ui/Views/Chat.jsx","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser"},"sourceFileName":"imports/ui/Views/Chat.jsx","filename":"/home/marc/Escritorio/ETSETB/3B/SAD/SAD/whatssad/imports/ui/Views/Chat.jsx","passPerPreset":false,"envName":"development","cwd":"/home/marc/Escritorio/ETSETB/3B/SAD/SAD/whatssad","root":"/home/marc/Escritorio/ETSETB/3B/SAD/SAD/whatssad","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true}},{"key":"transform-runtime","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.9.2","helpers":true,"useESModules":false,"corejs":false}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"Program":{"enter":[null],"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-nullish-coalescing-operator","visitor":{"_exploded":{},"_verified":{},"LogicalExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-chaining","visitor":{"_exploded":{},"_verified":{},"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-catch-binding","visitor":{"_exploded":{},"_verified":{},"CatchClause":{"enter":[null]}},"options":{}},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}}],"presets":[],"generatorOpts":{"filename":"/home/marc/Escritorio/ETSETB/3B/SAD/SAD/whatssad/imports/ui/Views/Chat.jsx","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"imports/ui/Views/Chat.jsx"}},"code":"module.export({\n  useUserMedia: () => useUserMedia\n});\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet Sidebar;\nmodule.link(\"../Components/Sidebar\", {\n  default(v) {\n    Sidebar = v;\n  }\n\n}, 1);\nlet MsgCont;\nmodule.link(\"../Components/MsgCont\", {\n  default(v) {\n    MsgCont = v;\n  }\n\n}, 2);\nlet useState, useEffect;\nmodule.link(\"react\", {\n  useState(v) {\n    useState = v;\n  },\n\n  useEffect(v) {\n    useEffect = v;\n  }\n\n}, 3);\n\nfunction useUserMedia(requestedMedia) {\n  const [mediaStream, setMediaStream] = useState(null);\n  useEffect(() => {\n    async function enableStream() {\n      try {\n        const stream = await navigator.mediaDevices.getUserMedia(requestedMedia);\n        setMediaStream(stream);\n      } catch (err) {}\n    }\n\n    if (!mediaStream) {\n      enableStream();\n    } else {\n      return function cleanup() {\n        mediaStream.getTracks().forEach(track => {\n          track.stop();\n        });\n      };\n    }\n  }, [mediaStream, requestedMedia]);\n  return mediaStream;\n}\n\nconst Chat = props => {\n  const videoRef = useRef();\n  const mediaStream = useUserMedia(CAPTURE_OPTIONS);\n\n  if (mediaStream && videoRef.current && !videoRef.current.srcObject) {\n    videoRef.current.srcObject = mediaStream;\n  }\n\n  function handleCanPlay() {\n    videoRef.current.play();\n  }\n\n  const CAPTURE_OPTIONS = {\n    audio: false,\n    video: {\n      facingMode: \"environment\"\n    }\n  };\n  return /*#__PURE__*/React.createElement(\"section\", {\n    className: \"chat-cont\"\n  }, /*#__PURE__*/React.createElement(Sidebar, null), /*#__PURE__*/React.createElement(MsgCont, null), /*#__PURE__*/React.createElement(\"video\", {\n    className: \"videoconf\",\n    ref: videoRef,\n    onCanPlay: handleCanPlay,\n    autoPlay: true,\n    playsInline: true,\n    muted: true\n  }));\n};\n\nmodule.exportDefault(Chat);","map":{"version":3,"sources":["imports/ui/Views/Chat.jsx"],"names":["module","export","useUserMedia","React","link","default","v","Sidebar","MsgCont","useState","useEffect","requestedMedia","mediaStream","setMediaStream","enableStream","stream","navigator","mediaDevices","getUserMedia","err","cleanup","getTracks","forEach","track","stop","Chat","props","videoRef","useRef","CAPTURE_OPTIONS","current","srcObject","handleCanPlay","play","audio","video","facingMode","exportDefault"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Sidebar from '../Components/Sidebar';\nimport MsgCont from '../Components/MsgCont';\nimport { useState, useEffect } from \"react\";\n\nexport function useUserMedia(requestedMedia) {\n    const [mediaStream, setMediaStream] = useState(null);\n  \n    useEffect(() => {\n      async function enableStream() {\n        try {\n          const stream = await navigator.mediaDevices.getUserMedia(requestedMedia);\n          setMediaStream(stream);\n        } catch(err) {\n        }\n      }\n  \n      if (!mediaStream) {\n        enableStream();\n      } else {\n        return function cleanup() {\n          mediaStream.getTracks().forEach(track => {\n            track.stop();\n          });\n        }\n      }\n    }, [mediaStream, requestedMedia]);\n  \n    return mediaStream;\n}\n\nconst Chat = props => {\n\n    const videoRef = useRef();\n    const mediaStream = useUserMedia(CAPTURE_OPTIONS);\n\n    if (mediaStream && videoRef.current && !videoRef.current.srcObject) {\n        videoRef.current.srcObject = mediaStream;\n    }\n\n    function handleCanPlay() {\n        videoRef.current.play();\n    }\n    const CAPTURE_OPTIONS = {\n        audio: false,\n        video: { facingMode: \"environment\" },\n    };\n\n    return(\n        <section className=\"chat-cont\">\n            <Sidebar></Sidebar>\n            <MsgCont></MsgCont>\n            <video className=\"videoconf\" ref={videoRef} onCanPlay={handleCanPlay} autoPlay playsInline muted />\n        </section>\n    )\n\n\n\n}\n\n\nexport default Chat;"]},"sourceType":"module","hash":"090de56bcac4f0ad2454f704bdf1c43904461008"}
